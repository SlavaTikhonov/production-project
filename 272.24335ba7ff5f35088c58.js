"use strict";(self.webpackChunkfirst_project_webpack_ts=self.webpackChunkfirst_project_webpack_ts||[]).push([[272],{8791:function(e,t,a){a.d(t,{I:function(){return c}});var s=a(7294),n=a(3007),r={InputWrapper:"p_6dRLUG",primary:"SBxOKW9p",secondary:"reg85lwi",placeholder:"uWIRRz2O",input:"Z6IBiNl_",readonly:"sFcbjx23"},l=a(5893);let i;!function(e){e.PRIMARY="primary",e.SECONDARY="secondary"}(i||(i={}));const c=(0,s.memo)((e=>{const{className:t,value:a,onChange:c,type:d="text",placeholder:o,autoFocus:u,readonly:p,theme:h=i.PRIMARY,...x}=e,f=(0,s.useRef)(null),[j,m]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{u&&(m(!0),f.current?.focus())}),[u]),(0,l.jsxs)("div",{className:(0,n.A)(r.InputWrapper,{[r[h]]:!0},[t]),children:[o&&(0,l.jsx)("div",{className:r.placeholder,children:`${o}:`}),(0,l.jsx)("input",{ref:f,type:d,value:a,onChange:e=>{c?.(e.target.value)},className:r.input,readOnly:p,...x})]})}))},169:function(e,t,a){a.d(t,{I:function(){return d}});var s=a(7294),n=a(3007),r={InputWrapper:"ZyI7rxIe",s:"mKldd7L_",m:"IyQiG8hL",l:"j7JcqtN4",addonLeft:"OqwwYwm8",addonRight:"o_xLYaZC",withAddonLeft:"zVArqqw4",withAddonRight:"HxXya_r8",focused:"jUzuVRdk",input:"L2BiQ3jT",readonly:"xspqW3a0"},l=a(9244),i=a(8969),c=a(5893);const d=(0,s.memo)((e=>{const{className:t,value:a,onChange:d,type:o="text",placeholder:u,autofocus:p,readonly:h,addonLeft:x,addonRight:f,label:j,size:m="m",...g}=e,C=(0,s.useRef)(null),[y,k]=(0,s.useState)(!1);(0,s.useEffect)((()=>{p&&(k(!0),C.current?.focus())}),[p]);const v={[r.readonly]:h,[r.focused]:y,[r.withAddonLeft]:Boolean(x),[r.withAddonRight]:Boolean(f)},R=(0,c.jsxs)("div",{className:(0,n.A)(r.InputWrapper,v,[t,r[m]]),children:[(0,c.jsx)("div",{className:r.addonLeft,children:x}),(0,c.jsx)("input",{ref:C,type:o,value:a,onChange:e=>{d?.(e.target.value)},className:r.input,onFocus:()=>{k(!0)},onBlur:()=>{k(!1)},readOnly:h,placeholder:u,...g}),(0,c.jsx)("div",{className:r.addonRight,children:f})]});return j?(0,c.jsxs)(l.U,{max:!0,gap:"8",children:[(0,c.jsx)(i.x,{text:j}),R]}):R}))},9272:function(e,t,a){a.r(t),a.d(t,{default:function(){return J}});var s,n=a(5443),r=a(7294),l=a(743),i=a(5518),c=a(7647),d=a(526),o=a(8791),u=a(7499),p=a(169),h=a(8969),x=a(1326),f=a(3007),j=a(5635);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},m.apply(this,arguments)}var g=e=>r.createElement("svg",m({width:"1em",height:"1em",viewBox:"0 0 24 22",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("path",{d:"M11.0746 1.633C11.3946 0.789 12.6056 0.789 12.9266 1.633L14.9966 7.367C15.0688 7.55379 15.1959 7.71428 15.3613 7.8273C15.5266 7.94031 15.7223 8.00053 15.9226 8H21.0096C21.9496 8 22.3596 9.17 21.6206 9.743L18.0006 13C17.8384 13.1247 17.7199 13.2975 17.6621 13.4937C17.6042 13.6898 17.61 13.8993 17.6786 14.092L19.0006 19.695C19.3226 20.595 18.2806 21.368 17.4926 20.814L12.5756 17.694C12.4072 17.5757 12.2064 17.5122 12.0006 17.5122C11.7948 17.5122 11.594 17.5757 11.4256 17.694L6.50856 20.814C5.72156 21.368 4.67856 20.594 5.00056 19.695L6.32257 14.092C6.39114 13.8993 6.39692 13.6898 6.33907 13.4937C6.28122 13.2975 6.16272 13.1247 6.00057 13L2.38056 9.743C1.64056 9.17 2.05256 8 2.99056 8H8.07756C8.27786 8.00067 8.47363 7.9405 8.63898 7.82747C8.80433 7.71444 8.93147 7.55387 9.00357 7.367L11.0736 1.633H11.0746Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),C=a(7650),y=a(5893);const k=[1,2,3,4,5],v=(0,r.memo)((e=>{const{className:t,size:a=30,selectedStars:s=0,onSelect:n}=e,[l,i]=(0,r.useState)(s),[c,d]=(0,r.useState)(Boolean(s)),o=()=>{c||i(0)},p=e=>()=>{c||(n?.(e),i(e),d(!0))};return(0,y.jsx)("div",{className:(0,f.A)((0,u.tn)({name:"isAppRedesigned",on:()=>"DJmR4hmO",off:()=>"kxtOyXZf"}),{},[t]),children:k.map((e=>{const t={className:(0,f.A)("_at8s_rB",{LIFf2ipz:c},[l>=e?"tJW47b5h":"KwJSFqOR"]),Svg:g,key:e,width:a,height:a,onMouseLeave:o,onMouseEnter:(s=e,()=>{c||i(s)}),onClick:p(e),"data-testid":`StarRating.${e}`,"data-selected":l>=e};var s;return(0,y.jsx)(u.zJ,{feature:"isAppRedesigned",on:(0,y.jsx)(C.J,{clickable:!c,...t}),off:(0,y.jsx)(j.J,{...t})})}))})}));var R=a(5301),I=a(8190),b=a(7702),A=a(8787),L=a(7231);const w=(0,r.memo)((e=>{const{className:t,onAccept:a,feedbackTitle:s,hasFeedback:l,onCancel:f,title:j,rate:m=0}=e,{t:g}=(0,n.$)(),[C,k]=(0,r.useState)(!1),[w,z]=(0,r.useState)(m),[N,O]=(0,r.useState)(""),S=(0,r.useCallback)((e=>{z(e),l?k(!0):a?.(e)}),[l,a]),_=(0,r.useCallback)((()=>{k(!1),a?.(w,N)}),[N,a,w]),J=(0,r.useCallback)((()=>{k(!1),f?.(w)}),[f,w]),W=(0,y.jsx)(u.zJ,{feature:"isAppRedesigned",on:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.x,{title:s}),(0,y.jsx)(p.I,{value:N,onChange:O,placeholder:g("Ваш отзыв")})]}),off:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.xv,{title:s}),(0,y.jsx)(o.I,{value:N,onChange:O,placeholder:g("Ваш отзыв")})]})}),q=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(x.g,{align:"center",gap:"8",max:!0,children:[(0,y.jsx)(u.zJ,{feature:"isAppRedesigned",on:(0,y.jsx)(h.x,{title:w?g("Спасибо за оценку!"):j}),off:(0,y.jsx)(d.xv,{title:w?g("Спасибо за оценку!"):j})}),(0,y.jsx)(v,{selectedStars:w,size:40,onSelect:S})]}),(0,y.jsx)(i.I3,{children:(0,y.jsx)(R.u,{isOpen:C,lazy:!0,children:(0,y.jsxs)(x.g,{max:!0,gap:"32",children:[W,(0,y.jsx)(u.zJ,{feature:"isAppRedesigned",on:(0,y.jsxs)(x.U,{max:!0,gap:"16",justify:"end",children:[(0,y.jsx)(I.z,{onClick:J,children:g("Закрыть")}),(0,y.jsx)(I.z,{onClick:_,children:g("Отправить")})]}),off:(0,y.jsxs)(x.U,{max:!0,gap:"16",justify:"end",children:[(0,y.jsx)(b.zx,{onClick:J,theme:b.bn.OUTLINE_RED,children:g("Закрыть")}),(0,y.jsx)(b.zx,{onClick:_,children:g("Отправить")})]})})]})})}),(0,y.jsx)(i.$,{children:(0,y.jsx)(A.d,{isOpen:C,lazy:!0,onClose:J,children:(0,y.jsxs)(x.g,{gap:"32",children:[W,(0,y.jsx)(u.zJ,{feature:"isAppRedesigned",on:(0,y.jsx)(I.z,{fullWidth:!0,onClick:_,size:"l",children:g("Отправить")}),off:(0,y.jsx)(b.zx,{fullWidth:!0,onClick:_,size:b.qE.L,children:g("Отправить")})})]})})})]});return(0,y.jsx)(u.zJ,{feature:"isAppRedesigned",on:(0,y.jsx)(L.Z,{max:!0,border:"lightly",padding:"24",className:t,children:q}),off:(0,y.jsx)(c.Z,{className:t,max:!0,children:q})})})),z=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{articleId:t,userId:a}=e;return{url:"/article-ratings",params:{userId:a,articleId:t}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),N=z.useGetArticleRatingQuery,O=z.useRateArticleMutation;var S=a(8029),_=a(8281),J=(0,r.memo)((e=>{const{className:t,articleId:a}=e,{t:s}=(0,n.$)(),i=(0,l.v9)(S.m5),{data:c,isLoading:d}=N({articleId:a,userId:i?.id??""}),[o]=O(),u=(0,r.useCallback)(((e,t)=>{try{o({userId:i?.id??"",articleId:a,rate:e,feedback:t})}catch(e){console.log(e)}}),[a,o,i?.id]),p=(0,r.useCallback)(((e,t)=>{u(e,t)}),[u]),h=(0,r.useCallback)((e=>{u(e)}),[u]);if(d)return(0,y.jsx)(_.O,{width:"100%",height:120});const x=c?.[0];return(0,y.jsx)(w,{onCancel:h,onAccept:p,rate:x?.rate,className:t,title:s("Оцените статью"),feedbackTitle:s("Оставьте свой отзыв о статье, это поможет улучишить качество"),hasFeedback:!0})}))}}]);