"use strict";(self.webpackChunkfirst_project_webpack_ts=self.webpackChunkfirst_project_webpack_ts||[]).push([[517],{8791:function(e,a,r){r.d(a,{I:function(){return c}});var t=r(7294),s=r(3007),n={InputWrapper:"p_6dRLUG",primary:"SBxOKW9p",secondary:"reg85lwi",placeholder:"uWIRRz2O",input:"Z6IBiNl_",readonly:"sFcbjx23"},o=r(5893);let l;!function(e){e.PRIMARY="primary",e.SECONDARY="secondary"}(l||(l={}));const c=(0,t.memo)((e=>{const{className:a,value:r,onChange:c,type:d="text",placeholder:u,autoFocus:i,readonly:p,theme:h=l.PRIMARY,...m}=e,x=(0,t.useRef)(null),[f,g]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{i&&(g(!0),x.current?.focus())}),[i]),(0,o.jsxs)("div",{className:(0,s.A)(n.InputWrapper,{[n[h]]:!0},[a]),children:[u&&(0,o.jsx)("div",{className:n.placeholder,children:`${u}:`}),(0,o.jsx)("input",{ref:x,type:d,value:r,onChange:e=>{c?.(e.target.value)},className:n.input,readOnly:p,...m})]})}))},169:function(e,a,r){r.d(a,{I:function(){return d}});var t=r(7294),s=r(3007),n={InputWrapper:"ZyI7rxIe",s:"mKldd7L_",m:"IyQiG8hL",l:"j7JcqtN4",addonLeft:"OqwwYwm8",addonRight:"o_xLYaZC",withAddonLeft:"zVArqqw4",withAddonRight:"HxXya_r8",focused:"jUzuVRdk",input:"L2BiQ3jT",readonly:"xspqW3a0"},o=r(9244),l=r(8969),c=r(5893);const d=(0,t.memo)((e=>{const{className:a,value:r,onChange:d,type:u="text",placeholder:i,autofocus:p,readonly:h,addonLeft:m,addonRight:x,label:f,size:g="m",...v}=e,j=(0,t.useRef)(null),[y,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{p&&(N(!0),j.current?.focus())}),[p]);const R={[n.readonly]:h,[n.focused]:y,[n.withAddonLeft]:Boolean(m),[n.withAddonRight]:Boolean(x)},w=(0,c.jsxs)("div",{className:(0,s.A)(n.InputWrapper,R,[a,n[g]]),children:[(0,c.jsx)("div",{className:n.addonLeft,children:m}),(0,c.jsx)("input",{ref:j,type:u,value:r,onChange:e=>{d?.(e.target.value)},className:n.input,onFocus:()=>{N(!0)},onBlur:()=>{N(!1)},readOnly:h,placeholder:i,...v}),(0,c.jsx)("div",{className:n.addonRight,children:x})]});return f?(0,c.jsxs)(o.U,{max:!0,gap:"8",children:[(0,c.jsx)(l.x,{text:f}),w]}):w}))},2517:function(e,a,r){r.r(a),r.d(a,{default:function(){return _}});var t=r(5443),s=r(743),n=r(7294),o=r(3007),l=r(7702),c=r(8791),d=r(526),u=r(5401),i=r(9864);const p=e=>e?.loginForm?.username||"",h=e=>e?.loginForm?.password||"",m=e=>e?.loginForm?.isLoading||!1,x=e=>e?.loginForm?.error;var f=r(4268),g=r(8029);const v=(0,f.hg)("login/loginByUsername",(async(e,a)=>{const{extra:r,dispatch:t,rejectWithValue:s}=a;try{const a=await r.api.post("/login",e);if(!a.data)throw new Error;return t(g.hI.setAuthData(a.data)),a.data}catch(e){return console.log(e),s("error")}})),j=(0,f.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(v.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(v.fulfilled,(e=>{e.isLoading=!1})).addCase(v.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:y}=j,{reducer:N}=j;var R="xYNEfcE9",w="PQPa1eB5",I="Ok_5amJo",C=r(7499),A=r(8969),L=r(169),b=r(8190),k=r(9244),E=r(5893);const O={loginForm:N};var _=(0,n.memo)((e=>{let{className:a,onSuccess:r}=e;const{t:f}=(0,t.$)(),g=(0,u.T)(),j=(0,s.v9)(p),N=(0,s.v9)(h),_=(0,s.v9)(m),F=(0,s.v9)(x),W=(0,n.useCallback)((e=>{g(y.setUsername(e))}),[g]),U=(0,n.useCallback)((e=>{g(y.setPassword(e))}),[g]),B=(0,n.useCallback)((async()=>{"fulfilled"===(await g(v({username:j,password:N}))).meta.requestStatus&&r()}),[r,g,j,N]);return(0,E.jsx)(i.W,{removeAfterUnmount:!0,reducers:O,children:(0,E.jsx)(C.zJ,{feature:"isAppRedesigned",on:(0,E.jsxs)(k.g,{gap:"16",className:(0,o.A)(R,{},[a]),children:[(0,E.jsx)(A.x,{title:f("Форма авторизации")}),F&&(0,E.jsx)(A.x,{text:f("Вы ввели неверный логин или пароль"),variant:"error"}),(0,E.jsx)(L.I,{autoFocus:!0,type:"text",placeholder:f("Логин"),className:w,onChange:W,value:j}),(0,E.jsx)(L.I,{type:"text",placeholder:f("Пароль"),className:w,onChange:U,value:N}),(0,E.jsx)(b.z,{variant:"outline",className:I,onClick:B,disabled:_,children:f("Войти")})]}),off:(0,E.jsxs)("div",{className:(0,o.A)(R,{},[a]),children:[(0,E.jsx)(d.xv,{title:f("Форма авторизации")}),F&&(0,E.jsx)(d.xv,{text:f("Вы ввели неверный логин или пароль"),theme:d.lg.ERROR}),(0,E.jsx)(c.I,{autoFocus:!0,type:"text",placeholder:f("Логин"),className:w,onChange:W,value:j}),(0,E.jsx)(c.I,{type:"text",placeholder:f("Пароль"),className:w,onChange:U,value:N}),(0,E.jsx)(l.zx,{theme:l.bn.OUTLINE,className:I,onClick:B,disabled:_,children:f("Войти")})]})})})}))},9864:function(e,a,r){r.d(a,{W:function(){return o}});var t=r(7294),s=r(743),n=r(5893);const o=e=>{const{children:a,reducers:r,removeAfterUnmount:o=!0}=e,l=(0,s.oR)(),c=(0,s.I0)();return(0,t.useEffect)((()=>{const e=l.reducerManager.getMountedReducers();return Object.entries(r).forEach((a=>{let[r,t]=a;e[r]||(l.reducerManager.add(r,t),c({type:`@INIT ${r} reducer`}))})),()=>{o&&Object.entries(r).forEach((e=>{let[a,r]=e;l.reducerManager.remove(a),c({type:`@DESTROY ${a} reducer`})}))}}),[]),(0,n.jsx)(n.Fragment,{children:a})}}}]);